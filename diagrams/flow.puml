@startuml
start

:Read Sensor Data (Temperature, Lux);

if (Temperature < 15°C?) then (yes)
  :Deactivate Water Valve;
  :Update Actuator State (Water Valve Off);
else (no)
  if (Temperature > 30°C?) then (yes)
    :Activate Water Valve;
    :Update Actuator State (Water Valve On);
  endif
endif

if (Lux < 200?) then (yes)
  :Open Blinds;
  :Update Actuator State (Blinds Open);
else (no)
  if (Lux > 800?) then (yes)
    :Close Blinds;
    :Update Actuator State (Blinds Closed);
  endif
endif

:Publish Data to AWS IoT Core (Sensor Data, Actuator State);

:Check for User Query via Alexa;

if (User Query?) then (yes)
  :Return Sensor Data (Temperature, Lux, Actuator State) via Alexa;
endif

stop
@enduml